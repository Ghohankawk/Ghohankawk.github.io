<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> java中String的getBytes的用法 · 闻道</title><meta name="description" content="java中String的getBytes的用法 - 韩坤"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/prontera.css"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-9654808400771776",
    enable_page_level_ads: true
});</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject'] = r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-100775956-1', 'auto');
ga('send', 'pageview');
</script><link rel="search" type="application/opensearchdescription+xml" href="http://ghohankawk.github.io/atom.xml" title="闻道"></head><body><header class="feature-header"><nav class="component-nav"><ul><div class="logo-container"><a href="/"><h2 class="title">闻道</h2></a></div><a href="/" target="_self" class="li component-nav-item"><p>主页</p></a><a href="/archives/" target="_self" class="li component-nav-item"><p>归档</p></a><a href="/about.html" target="_self" class="li component-nav-item"><p>关于我</p></a><a href="https://ghohankawk.gitbooks.io/book/content/" target="_blank" class="li component-nav-item"><p>个人书籍</p></a><ul class="shortcut-icons"><a href="http://blog.csdn.net/ghohankawk" target="_blank"><img src="/images/github.svg" class="icon"></a><a href="/atom.xml" target="_blank"><img src="/images/rss.svg" class="icon"></a></ul></ul></nav></header><main class="container"><div id="post-container"><div class="post"><article class="post-block"><h1 class="post-title">java中String的getBytes的用法</h1><div class="post-info">Jun 26, 2017</div><div class="post-content"><h1 id="今天要分享的内容是java的string方法getBytes"><a href="#今天要分享的内容是java的string方法getBytes" class="headerlink" title="今天要分享的内容是java的string方法getBytes"></a>今天要分享的内容是java的string方法getBytes</h1><h1 id="先看一个测试用例"><a href="#先看一个测试用例" class="headerlink" title="先看一个测试用例"></a>先看一个测试用例</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">import java.io.UnsupportedEncodingException;</div><div class="line"></div><div class="line">/**</div><div class="line"> * @author hankun</div><div class="line"> * @create 2017-06-26 20:28</div><div class="line"> */</div><div class="line">public class testGetBytes &#123;</div><div class="line">    /**</div><div class="line">     *</div><div class="line">     * 1、Unicode是一种编码规范，是为解决全球字符通用编码而设计的，而rUTF-8,UTF-16等是这种规范的一种实现。</div><div class="line"></div><div class="line">     2、java内部采用Unicode编码规范，也就是支持多语言的，具体采用的UTF-16编码方式。</div><div class="line"></div><div class="line">     3、不管程序过程中用到了gbk,iso8859-1等格式，在存储与传递的过程中实际传递的都是Unicode编码的数据，要想接收到的值不出现乱码，就要保证传过去的时候用的是A编码，接收的时候也用A编码来转换接收。</div><div class="line"></div><div class="line">     4、如果双方的file.encoding确保都相同，那就省事了，都默认转了，但往往在不同项目交互时很多时候是不一致的，这个时候是必须要进行编码转换的。</div><div class="line"></div><div class="line">     5、无论如论转换，java程序的数据都是要先和Unicode做转换，这样也就是能处理多语言字符集的原因了。底层保持了一致，只要在传值和接值的时候也一致就肯定不会出现乱码了。</div><div class="line">     * */</div><div class="line"></div><div class="line">    public static void main(String[] args) throws UnsupportedEncodingException &#123;</div><div class="line"></div><div class="line"></div><div class="line">        String str = &quot;中文字符&quot;;</div><div class="line"></div><div class="line">        System.out.println(&quot;original string---&quot; + str);// 会正常输出原始串</div><div class="line"></div><div class="line">        /**</div><div class="line">         *</div><div class="line">         * str.getBytes();  如果括号中不写charset，则采用的是Sytem.getProperty(&quot;file.encoding&quot;),即当前文件的编码方式，</div><div class="line">         *</div><div class="line">         * 很多人写的是系统的默认编码，通过代码测试并非如此，实际得到的是文件的编码方式*</div><div class="line">         *</div><div class="line">         * str.getBytes(&quot;charset&quot;);//指定charset，即将底层存储的Unicode码解析为charset编码格式的字节数组方式</div><div class="line">         *</div><div class="line">         * String new_str=new String(str.getBytes(&quot;utf-8&quot;),&quot;gbk&quot;));</div><div class="line">         *</div><div class="line">         * //将已经解析出来的字节数据转化为gbk编码格式的字符串，在内存中即为gbk格式的字节数组转为Unicode去交互传递</div><div class="line">         */</div><div class="line"></div><div class="line">        String new_str = new String(str.getBytes(&quot;utf-8&quot;), &quot;gbk&quot;);</div><div class="line"></div><div class="line">        /**</div><div class="line">         *</div><div class="line">         * 此时的输出是乱码，在UTF-8的file.encoding下输出gbk格式的数据肯定是乱码,但是new_str的确是gbk编码式的</div><div class="line">         *</div><div class="line">         * 此时的乱码源于encoding不符，但gbk格式的new_str本身数据并没有问题,通过下面的转换也可以看得出来</div><div class="line">         */</div><div class="line"></div><div class="line">        System.out.println(&quot;new string----&quot; + new_str);</div><div class="line"></div><div class="line">        String final_str = new String(new_str.getBytes(&quot;gbk&quot;), &quot;utf-8&quot;);// 此处的含意与最上边的注释是一致的参数含意</div><div class="line"></div><div class="line">        /**</div><div class="line">         *</div><div class="line">         *输出是正常的，此时将gbk编码格式的new_str字符串，用gbk这个charset去解析它，然后用utf-8再转码一次，</div><div class="line">         *</div><div class="line">         * 因为new_str确实是gbk格式的，才能经过utf-8编码得到正常的数据显示。</div><div class="line">         */</div><div class="line"></div><div class="line">        System.out.println(&quot;final string---&quot; + final_str);</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>正常说明，要干什么，再加一个链接按钮 <a href="http://daringfireball.net/projects/markdown/syntax" target="_blank" rel="external">xxx</a>. </p>
<h1 id="简单总结"><a href="#简单总结" class="headerlink" title="简单总结"></a>简单总结</h1><pre><code>1. 首先，你要明白，什么是uinicode，她和utf-8，以及utf-16，是什么关系
2. 其实，你要知道，java中是用了，utf-16
3. 再深入一点，就是，你也必须知道byte这个类型，就是所谓的字节数组了
4. 他和int的区别，怎么转换
5. byte数组里面存储的内容，怎么转换成对应的中文字符的？什么编码映射关系，转过去的？
6. 还有就是，你会经常看到0xff，这种，还有&amp;，按位于的这种操作，具体是什么含义
7. 大小端的问题，是什么意思？在网络里面如何区分？
</code></pre><p>这个地方，之前其实就一直看过，每次看完一遍，以为真的懂了，但是，过后，还是不知道，啥原理</p>
<p>这次，写过了，可能过一段时间又忘记了，但是，如果真正的理解了原理的话，就难忘记了</p>
<p>这个地方，不管前后端，都必须掌握</p>
<p>去看ruan大神的，那片，unicode文章，绝对有收获。</p>
</div></article></div></div></main><footer class="footer-container"><div class="paginator"><a href="/2017/06/27/java-encode/" class="prev">PREV</a><a href="/2017/06/20/java-threadlocal/" class="next">NEXT</a></div><div class="copyright"><p>© 2017 <a href="http://ghohankawk.github.io">韩坤</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/AngryPowman/hexo-theme-prontera" target="_blank">hexo-theme-prontera</a>.</p></div></footer></body></html>