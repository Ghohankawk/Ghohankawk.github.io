<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 关于linux中的grep用法 · 闻道</title><meta name="description" content="关于linux中的grep用法 - 韩坤"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/prontera.css"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-9654808400771776",
    enable_page_level_ads: true
});</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject'] = r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-100775956-1', 'auto');
ga('send', 'pageview');
</script><link rel="search" type="application/opensearchdescription+xml" href="http://ghohankawk.github.io/atom.xml" title="闻道"></head><body><header class="feature-header"><nav class="component-nav"><ul><div class="logo-container"><a href="/"><h2 class="title">闻道</h2></a></div><a href="/" target="_self" class="li component-nav-item"><p>主页</p></a><a href="/archives/" target="_self" class="li component-nav-item"><p>归档</p></a><a href="/about.html" target="_self" class="li component-nav-item"><p>关于我</p></a><a href="https://ghohankawk.gitbooks.io/book/content/" target="_blank" class="li component-nav-item"><p>个人书籍</p></a><ul class="shortcut-icons"><a href="http://blog.csdn.net/ghohankawk" target="_blank"><img src="/images/github.svg" class="icon"></a><a href="/atom.xml" target="_blank"><img src="/images/rss.svg" class="icon"></a></ul></ul></nav></header><main class="container"><div id="post-container"><div class="post"><article class="post-block"><h1 class="post-title">关于linux中的grep用法</h1><div class="post-info">Jun 29, 2017</div><div class="post-content"><h1 id="今天要分享的内容是grep这个命令"><a href="#今天要分享的内容是grep这个命令" class="headerlink" title="今天要分享的内容是grep这个命令"></a>今天要分享的内容是grep这个命令</h1><p>之前有一篇写了awk，那么grep的这个命令也就顺便研究一下</p>
<h1 id="grep背景简介"><a href="#grep背景简介" class="headerlink" title="grep背景简介"></a>grep背景简介</h1><p>  grep （global search regular expression(RE) and print out the line,全面搜索正则表达式并把行打印出来）是一种强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹配的行打印出来。Unix的grep家族包 括grep、egrep和fgrep。egrep和fgrep的命令只跟grep有很小不同。egrep是grep的扩展，支持更多的re元字符， fgrep就是fixed grep或fast grep，它们把所有的字母都看作单词，也就是说，正则表达式中的元字符表示回其自身的字面意义，不再特殊。linux使用GNU版本的grep。它功能 更强，可以通过-G、-E、-F命令行选项来使用egrep和fgrep的功能。</p>
<p>  grep的工作方式是这样的，它在一个或多个文件中搜索字符串模板。如果模板包括空格，则必须被引用，模板后的所有字符串被看作文件名。搜索的结果被送到屏幕，不影响原文件内容。</p>
<p>  grep可用于shell脚本，因为grep通过返回一个状态值来说明搜索的状态，如果模板搜索成功，则返回0，如果搜索不成功，则返回1，如果搜索的文件不存在，则返回2。我们利用这些返回值就可进行一些自动化的文本处理工作。</p>
<h1 id="grep正则表达式元字符集（基本集）"><a href="#grep正则表达式元字符集（基本集）" class="headerlink" title="grep正则表达式元字符集（基本集）"></a>grep正则表达式元字符集（基本集）</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">^</div><div class="line">锚定行的开始 如：&apos;^grep&apos;匹配所有以grep开头的行。</div><div class="line"></div><div class="line">$</div><div class="line">锚定行的结束 如：&apos;grep$&apos;匹配所有以grep结尾的行。</div><div class="line"></div><div class="line">.</div><div class="line">匹配一个非换行符的字符 如：&apos;gr.p&apos;匹配gr后接一个任意字符，然后是p。</div><div class="line"></div><div class="line">*</div><div class="line">匹配零个或多个先前字符 如：&apos;*grep&apos;匹配所有一个或多个空格后紧跟grep的行。 .*一起用代表任意字符。</div><div class="line"></div><div class="line">[]</div><div class="line">匹配一个指定范围内的字符，如&apos;[Gg]rep&apos;匹配Grep和grep。</div><div class="line"></div><div class="line">[^]</div><div class="line">匹配一个不在指定范围内的字符，如：&apos;[^A-FH-Z]rep&apos;匹配不包含A-R和T-Z的一个字母开头，紧跟rep的行。</div><div class="line"></div><div class="line">\(..\)</div><div class="line">标记匹配字符，如&apos;\(love\)&apos;，love被标记为1。</div><div class="line"></div><div class="line">\&lt;</div><div class="line">锚定单词的开始，如:&apos;\&lt;grep&apos;匹配包含以grep开头的单词的行。</div><div class="line"></div><div class="line">\&gt;</div><div class="line">锚定单词的结束，如&apos;grep\&gt;&apos;匹配包含以grep结尾的单词的行。</div><div class="line"></div><div class="line">x\&#123;m\&#125;</div><div class="line">重复字符x，m次，如：&apos;0\&#123;5\&#125;&apos;匹配包含5个o的行。</div><div class="line"></div><div class="line">x\&#123;m,\&#125;</div><div class="line">重复字符x,至少m次，如：&apos;o\&#123;5,\&#125;&apos;匹配至少有5个o的行。</div><div class="line"></div><div class="line">x\&#123;m,n\&#125;</div><div class="line">重复字符x，至少m次，不多于n次，如：&apos;o\&#123;5,10\&#125;&apos;匹配5--10个o的行。</div><div class="line"></div><div class="line">\w</div><div class="line">匹配文字和数字字符，也就是[A-Za-z0-9]，如：&apos;G\w*p&apos;匹配以G后跟零个或多个文字或数字字符，然后是p。</div><div class="line"></div><div class="line">\W</div><div class="line">\w的反置形式，匹配一个或多个非单词字符，如点号句号等。</div><div class="line"></div><div class="line">\b</div><div class="line">单词锁定符，如: &apos;\bgrep\b&apos;只匹配grep。</div></pre></td></tr></table></figure>
<h1 id="用于egrep和-grep-E的元字符扩展集"><a href="#用于egrep和-grep-E的元字符扩展集" class="headerlink" title="用于egrep和 grep -E的元字符扩展集"></a>用于egrep和 grep -E的元字符扩展集</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">+</div><div class="line">匹配一个或多个先前的字符。如：&apos;[a-z]+able&apos;，匹配一个或多个小写字母后跟able的串，如loveable,enable,disable等。</div><div class="line"></div><div class="line">?</div><div class="line">匹配零个或多个先前的字符。如：&apos;gr?p&apos;匹配g后跟一个r或没有字符，然后是p的行。</div><div class="line"></div><div class="line">a|b|c</div><div class="line">匹配a或b或c。如：grep|sed匹配grep或sed</div><div class="line"></div><div class="line">()</div><div class="line">分组符号，如：love(able|rs)ov+匹配loveable或lovers，匹配一个或多个ov。</div><div class="line"></div><div class="line">    \(\)：将一个或多个字符捆绑在一起，当作一个整体进行处理；</div><div class="line"></div><div class="line">        # grep &quot;\(xy\)\+&quot; grep.txt</div><div class="line"></div><div class="line">        \(xy\)*ab</div><div class="line"></div><div class="line">Note：分组括号中的模式匹配到的内容会被正则表达式引擎记录于内部的变量中，这些变量的命名方式为：\1,\2,\3,.....</div><div class="line"></div><div class="line">    \1：从左侧起，第一个左括号以及与之匹配右括号之间的模式所匹配到的字符；</div><div class="line"></div><div class="line">        \(ab\+\(xy\)*\)：</div><div class="line"></div><div class="line">            \1：ab\+\(xy\)*</div><div class="line"></div><div class="line">            \2：xy</div><div class="line"></div><div class="line">x&#123;m&#125;,x&#123;m,&#125;,x&#123;m,n&#125;</div><div class="line">作用同x\&#123;m\&#125;,x\&#123;m,\&#125;,x\&#123;m,n\&#125;</div></pre></td></tr></table></figure>
<h1 id="POSIX字符类"><a href="#POSIX字符类" class="headerlink" title="POSIX字符类"></a>POSIX字符类</h1><p>为了在不同国家的字符编码中保持一至，POSIX(The Portable Operating System Interface)增加了特殊的字符类，如[:alnum:]是A-Za-z0-9的另一个写法。要把它们放到[]号内才能成为正则表达式，如[A- Za-z0-9]或[[:alnum:]]。在linux下的grep除fgrep外，都支持POSIX的字符类。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">[:alnum:]</div><div class="line">文字数字字符</div><div class="line"></div><div class="line">[:alpha:]</div><div class="line">文字字符</div><div class="line"></div><div class="line">[:digit:]</div><div class="line">数字字符</div><div class="line"></div><div class="line">[:graph:]</div><div class="line">非空字符（非空格、控制字符）</div><div class="line"></div><div class="line">[:lower:]</div><div class="line">小写字符</div><div class="line"></div><div class="line">[:cntrl:]</div><div class="line">控制字符</div><div class="line"></div><div class="line">[:print:]</div><div class="line">非空字符（包括空格）</div><div class="line"></div><div class="line">[:punct:]</div><div class="line">标点符号</div><div class="line"></div><div class="line">[:space:]</div><div class="line">所有空白字符（新行，空格，制表符）</div><div class="line"></div><div class="line">[:upper:]</div><div class="line">大写字符</div><div class="line"></div><div class="line">[:xdigit:]</div><div class="line">十六进制数字（0-9，a-f，A-F）</div></pre></td></tr></table></figure>
<h1 id="Grep命令选项"><a href="#Grep命令选项" class="headerlink" title="Grep命令选项"></a>Grep命令选项</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line">-?</div><div class="line">同时显示匹配行上下的？行，如：grep -2 pattern filename同时显示匹配行的上下2行。</div><div class="line"></div><div class="line">-b，--byte-offset</div><div class="line">打印匹配行前面打印该行所在的偏移。</div><div class="line"></div><div class="line">-c,--count</div><div class="line">只打印匹配的行数，不显示匹配的内容，数量匹配了多少行。</div><div class="line"></div><div class="line">-f File，--file=File</div><div class="line">从文件中提取模板。空文件中包含0个模板，所以什么都不匹配。</div><div class="line"></div><div class="line">-h，--no-filename</div><div class="line">当搜索多个文件时，不显示匹配文件名前缀。</div><div class="line"></div><div class="line">-i，--ignore-case</div><div class="line">忽略大小写差别。</div><div class="line"></div><div class="line">-q，--quiet</div><div class="line">取消显示，只返回退出状态。0则表示找到了匹配的行。</div><div class="line"></div><div class="line">-l，--files-with-matches</div><div class="line">打印匹配模板的文件清单。</div><div class="line"></div><div class="line">-L，--files-without-match</div><div class="line">打印不匹配模板的文件清单。</div><div class="line"></div><div class="line">-n，--line-number</div><div class="line">在匹配的行前面打印行号。</div><div class="line"></div><div class="line">-s，--silent</div><div class="line">不显示关于不存在或者无法读取文件的错误信息。</div><div class="line"></div><div class="line">-v，--revert-match</div><div class="line">反检索，只显示不匹配的行。</div><div class="line"></div><div class="line">-w，--word-regexp</div><div class="line">如果被\&lt;和\&gt;引用，就把表达式做为一个单词搜索。</div><div class="line"></div><div class="line">-V，--version</div><div class="line">显示软件版本信息。</div><div class="line"></div><div class="line">--color=auto：对匹配到的文本着色显示；</div><div class="line"></div><div class="line"></div><div class="line">    -o：仅显示匹配到的字符串</div><div class="line"></div><div class="line">    -A #：after，显示匹配的后#行</div><div class="line"></div><div class="line">    -B #：before，显示匹配的前#行</div><div class="line"></div><div class="line">    -C #：context，前后各#行</div><div class="line"></div><div class="line">    -E：使用ERE，支持扩展的正则表达式</div><div class="line"></div><div class="line">    -s：不显示不存在或无匹配的错误信息</div></pre></td></tr></table></figure>
<h1 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">要用好grep这个工具，其实就是要写好正则表达式，所以这里不对grep的所有功能进行实例讲解，只列几个例子，讲解一个正则表达式的写法。</div><div class="line"></div><div class="line">$ ls -l | grep &apos;^a&apos;</div><div class="line">通过管道过滤ls -l输出的内容，只显示以a开头的行。</div><div class="line"></div><div class="line">$ grep &apos;test&apos; d*</div><div class="line">显示所有以d开头的文件中包含test的行。</div><div class="line"></div><div class="line">$ grep &apos;test&apos; aa bb cc</div><div class="line">显示在aa，bb，cc文件中匹配test的行。</div><div class="line"></div><div class="line">$ grep &apos;[a-z]\&#123;5\&#125;&apos; aa</div><div class="line">显示所有包含每个字符串至少有5个连续小写字符的字符串的行。</div><div class="line"></div><div class="line">$ grep &apos;w\(es\)t.*\1&apos; aa</div><div class="line">如果west被匹配，则es就被存储到内存中，并标记为1，然后搜索任意个字符（.*），这些字符后面紧跟着另外一个es（\1），找到就显示该行。如果用egrep或grep -E，就不用&quot;\&quot;号进行转义，直接写成&apos;w(es)t.*\1&apos;就可以了。</div></pre></td></tr></table></figure>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>grep确实很强大，同时，相对awk还是简单多了，无论是命令还是使用</p>
<p>毕竟只是单纯的去查找，而不做任何的修改内容上</p>
<p>awk函数多，又可以自己编程</p>
<p>多到底，grep还是考验对正则表达式的理解</p>
</div></article></div></div></main><footer class="footer-container"><div class="paginator"><a href="/2017/06/29/linux-awk/" class="next">NEXT</a></div><div class="copyright"><p>© 2017 <a href="http://ghohankawk.github.io">韩坤</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/AngryPowman/hexo-theme-prontera" target="_blank">hexo-theme-prontera</a>.</p></div></footer></body></html>